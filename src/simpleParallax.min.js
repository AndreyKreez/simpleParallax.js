!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,n,i){"use strict";var a=function(){for(var e,t="transform webkitTransform mozTransform oTransform msTransform".split(" "),a=(n.createElement("div"),0);e===i;)e=n.createElement("div").style[t[a]]!=i?t[a]:i,a++;return e}();!function(){for(var e=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[n[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[i]+"CancelAnimationFrame"]||t[n[i]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(n,i){var a=(new Date).getTime(),o=Math.max(0,16-(a-e)),r=t.setTimeout(function(){n(a+o)},o);return e=a+o,r}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(e){clearTimeout(e)})}();var o="simpleParallax",r=-1,l=!1;function s(t,n){this.element=t,this.$element=e(this.element),this._name=o,this._defaults=e.fn.simpleParallax.defaults,this.options=e.extend({},this._defaults,n),this.init()}e.extend(s,{getViewportOffset:function(){var n=e(t);this.viewportHeight=n.outerHeight(),this.viewportTop=n.scrollTop()-20,this.viewportBottom=n.scrollTop()+s.viewportHeight+20}}),e.extend(s.prototype,{occurence:[],init:function(){var e=this;e.wrapElement(),this.occurence.push(e),l||(e.proceedElement(),l=!0)},wrapElement:function(){var e=this;e.$element.closest("picture").length?e.$elementToWrap=e.$element.parent("picture"):e.$elementToWrap=e.$element,e.$elementToWrap.wrap('<div class="simpleParallax" style="overflow:hidden"></div>'),e.$elementContainer=e.$element.closest(".simpleParallax")},unWrapElement:function(e){e.unwrap("simpleParallax")},getElementOffset:function(){var e=this,t=e.$elementContainer[0];e.elementHeight=t.offsetHeight,e.elementTopX=t.offsetTop,e.elementBottomX=e.elementTopX+e.elementHeight},isVisible:function(){return this.elementBottomX>s.viewportTop&&this.elementTopX<s.viewportBottom},calculateRange:function(){var e=this;e.elementImageHeight=e.$element[0].getBoundingClientRect().height,e.rangeMax=Math.abs(e.elementHeight-e.elementImageHeight),"down"!==e.options.orientation&&"right"!==e.options.orientation||(e.rangeMax*=-1)},calculate:function(){var e=this,t=e.$element.data(o+"_percentage"),n=(s.viewportBottom-20-e.elementTopX)/((s.viewportHeight+e.elementHeight)/100);return n>100?n=100:n<0&&(n=0),t!==n&&(e.calculateRange(),e.translateValue=n/100*e.rangeMax-e.rangeMax/2,e.$element.data(o+"_percentage",n),!0)},animate:function(){var e,t,n=this;"up"==n.options.orientation||"down"==n.options.orientation?t="translateY":"left"!=n.options.orientation&&"right"!=n.options.orientation||(t="translateX"),e="scale("+n.options.scale+") "+t+"("+n.translateValue+"px)",n.$element[0].style[a]=e},proceedElement:function(){var n=this;r!==t.pageYOffset?(r=t.pageYOffset,e.each(this.occurence,function(e){(0===e&&s.getViewportOffset(),this.getElementOffset(),this.isVisible())&&(this.calculate()&&this.animate())}),t.requestAnimationFrame(n.proceedElement.bind(n))):t.requestAnimationFrame(n.proceedElement.bind(n))},destroy:function(){var t=this;e(".simpleParallax").each(function(){e(this).find("img")[0].style[a]="",e(this).removeData(),t.unWrapElement(e(this))}),t.unbindEvents()}}),e.fn.simpleParallax=function(t){return this.each(function(){e.data(this,o)||e.data(this,o,new s(this,t))}),this},e.fn.simpleParallax.defaults={orientation:"up",scale:"1.2"}});